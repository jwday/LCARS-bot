{"version":3,"file":"index.esm.js","sources":["../src/parse-path.js","../src/path2d-polyfill.js","../src/index.js"],"sourcesContent":["const ARG_LENGTH = {\n  a: 7,\n  c: 6,\n  h: 1,\n  l: 2,\n  m: 2,\n  q: 4,\n  s: 4,\n  t: 2,\n  v: 1,\n  z: 0,\n};\n\nconst SEGMENT_PATTERN = /([astvzqmhlc])([^astvzqmhlc]*)/gi;\n\nconst NUMBER = /-?[0-9]*\\.?[0-9]+(?:e[-+]?\\d+)?/gi;\n\nfunction parseValues(args) {\n  const numbers = args.match(NUMBER);\n  return numbers ? numbers.map(Number) : [];\n}\n\n/**\n * parse an svg path data string. Generates an Array\n * of commands where each command is an Array of the\n * form `[command, arg1, arg2, ...]`\n *\n * https://www.w3.org/TR/SVG/paths.html#PathDataGeneralInformation\n * @ignore\n *\n * @param {string} path\n * @returns {array}\n */\nfunction parse(path) {\n  const data = [];\n  const p = String(path).trim();\n\n  // A path data segment (if there is one) must begin with a \"moveto\" command\n  if (p[0] !== 'M' && p[0] !== 'm') {\n    return data;\n  }\n\n  p.replace(SEGMENT_PATTERN, (_, command, args) => {\n    let type = command.toLowerCase();\n    let theArgs = parseValues(args);\n    let theCommand = command;\n    // overloaded moveTo\n    if (type === 'm' && theArgs.length > 2) {\n      data.push([theCommand].concat(theArgs.splice(0, 2)));\n      type = 'l';\n      theCommand = theCommand === 'm' ? 'l' : 'L';\n    }\n\n    // Ignore invalid commands\n    if (theArgs.length < ARG_LENGTH[type]) {\n      return '';\n    }\n\n    data.push([theCommand].concat(theArgs.splice(0, ARG_LENGTH[type])));\n\n    // The command letter can be eliminated on subsequent commands if the\n    // same command is used multiple times in a row (e.g., you can drop the\n    // second \"L\" in \"M 100 200 L 200 100 L -100 -200\" and use\n    // \"M 100 200 L 200 100 -100 -200\" instead).\n    while (\n      theArgs.length >= ARG_LENGTH[type] &&\n      theArgs.length &&\n      ARG_LENGTH[type]\n    ) {\n      data.push([theCommand].concat(theArgs.splice(0, ARG_LENGTH[type])));\n    }\n\n    return '';\n  });\n  return data;\n}\n\nmodule.exports = parse;\n","const parsePath = require('./parse-path');\n\n/**\n * Work around for https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8438884/\n * @ignore\n */\nfunction supportsSvgPathArgument(window) {\n  const canvas = window.document.createElement('canvas');\n  const g = canvas.getContext('2d');\n  const p = new window.Path2D('M0 0 L1 1');\n  g.strokeStyle = 'red';\n  g.lineWidth = 1;\n  g.stroke(p);\n  const imgData = g.getImageData(0, 0, 1, 1);\n  return imgData.data[0] === 255; // Check if pixel is red\n}\n\nfunction rotatePoint(point, angle) {\n  const nx = point.x * Math.cos(angle) - point.y * Math.sin(angle);\n  const ny = point.y * Math.cos(angle) + point.x * Math.sin(angle);\n  point.x = nx;\n  point.y = ny;\n}\n\nfunction translatePoint(point, dx, dy) {\n  point.x += dx;\n  point.y += dy;\n}\n\nfunction scalePoint(point, s) {\n  point.x *= s;\n  point.y *= s;\n}\n\nfunction polyFillPath2D(window) {\n  if (typeof window === 'undefined' || !window.CanvasRenderingContext2D) {\n    return;\n  }\n  if (window.Path2D && supportsSvgPathArgument(window)) {\n    return;\n  }\n\n  /**\n   * Crates a Path2D polyfill object\n   * @constructor\n   * @ignore\n   * @param {String} path\n   */\n  class Path2D {\n    constructor(path) {\n      this.segments = [];\n      if (path && path instanceof Path2D) {\n        this.segments.push(...path.segments);\n      } else if (path) {\n        this.segments = parsePath(path);\n      }\n    }\n\n    addPath(path) {\n      if (path && path instanceof Path2D) {\n        this.segments.push(...path.segments);\n      }\n    }\n\n    moveTo(x, y) {\n      this.segments.push(['M', x, y]);\n    }\n\n    lineTo(x, y) {\n      this.segments.push(['L', x, y]);\n    }\n\n    arc(x, y, r, start, end, ccw) {\n      this.segments.push(['AC', x, y, r, start, end, !!ccw]);\n    }\n\n    arcTo(x1, y1, x2, y2, r) {\n      this.segments.push(['AT', x1, y1, x2, y2, r]);\n    }\n\n    ellipse(x, y, rx, ry, angle, start, end, ccw) {\n      this.segments.push(['E', x, y, rx, ry, angle, start, end, !!ccw]);\n    }\n\n    closePath() {\n      this.segments.push(['Z']);\n    }\n\n    bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y) {\n      this.segments.push(['C', cp1x, cp1y, cp2x, cp2y, x, y]);\n    }\n\n    quadraticCurveTo(cpx, cpy, x, y) {\n      this.segments.push(['Q', cpx, cpy, x, y]);\n    }\n\n    rect(x, y, width, height) {\n      this.segments.push(['R', x, y, width, height]);\n    }\n  }\n\n  function buildPath(canvas, segments) {\n    let endAngle;\n    let startAngle;\n    let largeArcFlag;\n    let sweepFlag;\n    let endPoint;\n    let midPoint;\n    let angle;\n    let lambda;\n    let t1;\n    let t2;\n    let x;\n    let x1;\n    let y;\n    let y1;\n    let r;\n    let rx;\n    let ry;\n    let w;\n    let h;\n    let pathType;\n    let centerPoint;\n    let cpx;\n    let cpy;\n    let qcpx;\n    let qcpy;\n    let ccw;\n    let startPoint = { x: 0, y: 0 };\n    const currentPoint = { x: 0, y: 0 };\n\n    canvas.beginPath();\n    for (let i = 0; i < segments.length; ++i) {\n      const s = segments[i];\n      pathType = s[0];\n\n      // Reset control point if command is not cubic\n      if (\n        pathType !== 'S' &&\n        pathType !== 's' &&\n        pathType !== 'C' &&\n        pathType !== 'c'\n      ) {\n        cpx = null;\n        cpy = null;\n      }\n\n      if (\n        pathType !== 'T' &&\n        pathType !== 't' &&\n        pathType !== 'Q' &&\n        pathType !== 'q'\n      ) {\n        qcpx = null;\n        qcpy = null;\n      }\n\n      switch (pathType) {\n        case 'm':\n        case 'M':\n          if (pathType === 'm') {\n            x += s[1];\n            y += s[2];\n          } else {\n            x = s[1];\n            y = s[2];\n          }\n\n          if (pathType === 'M' || !startPoint) {\n            startPoint = { x, y };\n          }\n\n          canvas.moveTo(x, y);\n          break;\n        case 'l':\n          x += s[1];\n          y += s[2];\n          canvas.lineTo(x, y);\n          break;\n        case 'L':\n          x = s[1];\n          y = s[2];\n          canvas.lineTo(x, y);\n          break;\n        case 'H':\n          x = s[1];\n          canvas.lineTo(x, y);\n          break;\n        case 'h':\n          x += s[1];\n          canvas.lineTo(x, y);\n          break;\n        case 'V':\n          y = s[1];\n          canvas.lineTo(x, y);\n          break;\n        case 'v':\n          y += s[1];\n          canvas.lineTo(x, y);\n          break;\n        case 'a':\n        case 'A':\n          if (pathType === 'a') {\n            x += s[6];\n            y += s[7];\n          } else {\n            x = s[6];\n            y = s[7];\n          }\n\n          rx = s[1]; // rx\n          ry = s[2]; // ry\n          angle = (s[3] * Math.PI) / 180;\n          largeArcFlag = !!s[4];\n          sweepFlag = !!s[5];\n          endPoint = { x, y };\n\n          // https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n\n          midPoint = {\n            x: (currentPoint.x - endPoint.x) / 2,\n            y: (currentPoint.y - endPoint.y) / 2,\n          };\n          rotatePoint(midPoint, -angle);\n\n          // radius correction\n          lambda =\n            (midPoint.x * midPoint.x) / (rx * rx) +\n            (midPoint.y * midPoint.y) / (ry * ry);\n          if (lambda > 1) {\n            lambda = Math.sqrt(lambda);\n            rx *= lambda;\n            ry *= lambda;\n          }\n\n          centerPoint = {\n            x: (rx * midPoint.y) / ry,\n            y: -(ry * midPoint.x) / rx,\n          };\n          t1 = rx * rx * ry * ry;\n          t2 =\n            rx * rx * midPoint.y * midPoint.y +\n            ry * ry * midPoint.x * midPoint.x;\n          if (sweepFlag !== largeArcFlag) {\n            scalePoint(centerPoint, Math.sqrt((t1 - t2) / t2) || 0);\n          } else {\n            scalePoint(centerPoint, -Math.sqrt((t1 - t2) / t2) || 0);\n          }\n\n          startAngle = Math.atan2(\n            (midPoint.y - centerPoint.y) / ry,\n            (midPoint.x - centerPoint.x) / rx\n          );\n          endAngle = Math.atan2(\n            -(midPoint.y + centerPoint.y) / ry,\n            -(midPoint.x + centerPoint.x) / rx\n          );\n\n          rotatePoint(centerPoint, angle);\n          translatePoint(\n            centerPoint,\n            (endPoint.x + currentPoint.x) / 2,\n            (endPoint.y + currentPoint.y) / 2\n          );\n\n          canvas.save();\n          canvas.translate(centerPoint.x, centerPoint.y);\n          canvas.rotate(angle);\n          canvas.scale(rx, ry);\n          canvas.arc(0, 0, 1, startAngle, endAngle, !sweepFlag);\n          canvas.restore();\n          break;\n        case 'C':\n          cpx = s[3]; // Last control point\n          cpy = s[4];\n          x = s[5];\n          y = s[6];\n          canvas.bezierCurveTo(s[1], s[2], cpx, cpy, x, y);\n          break;\n        case 'c':\n          canvas.bezierCurveTo(\n            s[1] + x,\n            s[2] + y,\n            s[3] + x,\n            s[4] + y,\n            s[5] + x,\n            s[6] + y\n          );\n          cpx = s[3] + x; // Last control point\n          cpy = s[4] + y;\n          x += s[5];\n          y += s[6];\n          break;\n        case 'S':\n          if (cpx === null || cpx === null) {\n            cpx = x;\n            cpy = y;\n          }\n\n          canvas.bezierCurveTo(\n            2 * x - cpx,\n            2 * y - cpy,\n            s[1],\n            s[2],\n            s[3],\n            s[4]\n          );\n          cpx = s[1]; // last control point\n          cpy = s[2];\n          x = s[3];\n          y = s[4];\n          break;\n        case 's':\n          if (cpx === null || cpx === null) {\n            cpx = x;\n            cpy = y;\n          }\n\n          canvas.bezierCurveTo(\n            2 * x - cpx,\n            2 * y - cpy,\n            s[1] + x,\n            s[2] + y,\n            s[3] + x,\n            s[4] + y\n          );\n          cpx = s[1] + x; // last control point\n          cpy = s[2] + y;\n          x += s[3];\n          y += s[4];\n          break;\n        case 'Q':\n          qcpx = s[1]; // last control point\n          qcpy = s[2];\n          x = s[3];\n          y = s[4];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n        case 'q':\n          qcpx = s[1] + x; // last control point\n          qcpy = s[2] + y;\n          x += s[3];\n          y += s[4];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n        case 'T':\n          if (qcpx === null || qcpx === null) {\n            qcpx = x;\n            qcpy = y;\n          }\n          qcpx = 2 * x - qcpx; // last control point\n          qcpy = 2 * y - qcpy;\n          x = s[1];\n          y = s[2];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n        case 't':\n          if (qcpx === null || qcpx === null) {\n            qcpx = x;\n            qcpy = y;\n          }\n          qcpx = 2 * x - qcpx; // last control point\n          qcpy = 2 * y - qcpy;\n          x += s[1];\n          y += s[2];\n          canvas.quadraticCurveTo(qcpx, qcpy, x, y);\n          break;\n        case 'z':\n        case 'Z':\n          x = startPoint.x;\n          y = startPoint.y;\n          startPoint = undefined;\n          canvas.closePath();\n          break;\n        case 'AC': // arc\n          x = s[1];\n          y = s[2];\n          r = s[3];\n          startAngle = s[4];\n          endAngle = s[5];\n          ccw = s[6];\n          canvas.arc(x, y, r, startAngle, endAngle, ccw);\n          break;\n        case 'AT': // arcTo\n          x1 = s[1];\n          y1 = s[2];\n          x = s[3];\n          y = s[4];\n          r = s[5];\n          canvas.arcTo(x1, y1, x, y, r);\n          break;\n        case 'E': // ellipse\n          x = s[1];\n          y = s[2];\n          rx = s[3];\n          ry = s[4];\n          angle = s[5];\n          startAngle = s[6];\n          endAngle = s[7];\n          ccw = s[8];\n          canvas.save();\n          canvas.translate(x, y);\n          canvas.rotate(angle);\n          canvas.scale(rx, ry);\n          canvas.arc(0, 0, 1, startAngle, endAngle, ccw);\n          canvas.restore();\n          break;\n        case 'R': // rect\n          x = s[1];\n          y = s[2];\n          w = s[3];\n          h = s[4];\n          startPoint = { x, y };\n          canvas.rect(x, y, w, h);\n          break;\n        default:\n        // throw new Error(`${pathType} is not implemented`); ?\n      }\n\n      currentPoint.x = x;\n      currentPoint.y = y;\n    }\n  }\n\n  const cFill = window.CanvasRenderingContext2D.prototype.fill;\n  const cStroke = window.CanvasRenderingContext2D.prototype.stroke;\n\n  window.CanvasRenderingContext2D.prototype.fill = function fill(...args) {\n    let fillRule = 'nonzero';\n    if (\n      args.length === 0 ||\n      (args.length === 1 && typeof args[0] === 'string')\n    ) {\n      cFill.apply(this, args);\n      return;\n    }\n    if (arguments.length === 2) {\n      fillRule = args[1];\n    }\n    const path = args[0];\n    buildPath(this, path.segments);\n    cFill.call(this, fillRule);\n  };\n\n  window.CanvasRenderingContext2D.prototype.stroke = function stroke(path) {\n    if (!path) {\n      cStroke.call(this);\n      return;\n    }\n    buildPath(this, path.segments);\n    cStroke.call(this);\n  };\n\n  const cIsPointInPath =\n    window.CanvasRenderingContext2D.prototype.isPointInPath;\n\n  window.CanvasRenderingContext2D.prototype.isPointInPath = function isPointInPath(\n    ...args\n  ) {\n    // let fillRule = 'nonzero';\n    if (args[0].constructor.name === 'Path2D') {\n      // first argument is a Path2D object\n      const x = args[1];\n      const y = args[2];\n      const fillRule = args[3] || 'nonzero';\n      const path = args[0];\n      buildPath(this, path.segments);\n      return cIsPointInPath.apply(this, [x, y, fillRule]);\n    } else {\n      return cIsPointInPath.apply(this, args);\n    }\n  };\n\n  window.Path2D = Path2D;\n}\n\nmodule.exports = polyFillPath2D;\n","const parsePath = require('./parse-path');\nconst path2dPolyfill = require('./path2d-polyfill');\n\nif (typeof window !== 'undefined') {\n  path2dPolyfill(window);\n}\n\nmodule.exports = {\n  path2dPolyfill,\n  parsePath,\n};\n"],"names":["ARG_LENGTH","a","c","h","l","m","q","s","t","v","z","SEGMENT_PATTERN","NUMBER","parseValues","args","numbers","match","map","Number","parse","path","data","p","String","trim","replace","_","command","type","toLowerCase","theArgs","theCommand","length","push","concat","splice","supportsSvgPathArgument","window","canvas","document","createElement","g","getContext","Path2D","strokeStyle","lineWidth","stroke","imgData","getImageData","rotatePoint","point","angle","nx","x","Math","cos","y","sin","ny","translatePoint","dx","dy","scalePoint","polyFillPath2D","CanvasRenderingContext2D","segments","parsePath","r","start","end","ccw","x1","y1","x2","y2","rx","ry","cp1x","cp1y","cp2x","cp2y","cpx","cpy","width","height","buildPath","endAngle","startAngle","largeArcFlag","sweepFlag","endPoint","midPoint","lambda","t1","t2","w","pathType","centerPoint","qcpx","qcpy","startPoint","currentPoint","beginPath","i","moveTo","lineTo","PI","sqrt","atan2","save","translate","rotate","scale","arc","restore","bezierCurveTo","quadraticCurveTo","undefined","closePath","arcTo","rect","cFill","prototype","fill","cStroke","fillRule","apply","arguments","call","cIsPointInPath","isPointInPath","constructor","name","path2dPolyfill"],"mappings":"AAAA,IAAMA,UAAU,GAAG;AACjBC,EAAAA,CAAC,EAAE,CADc;AAEjBC,EAAAA,CAAC,EAAE,CAFc;AAGjBC,EAAAA,CAAC,EAAE,CAHc;AAIjBC,EAAAA,CAAC,EAAE,CAJc;AAKjBC,EAAAA,CAAC,EAAE,CALc;AAMjBC,EAAAA,CAAC,EAAE,CANc;AAOjBC,EAAAA,CAAC,EAAE,CAPc;AAQjBC,EAAAA,CAAC,EAAE,CARc;AASjBC,EAAAA,CAAC,EAAE,CATc;AAUjBC,EAAAA,CAAC,EAAE;AAVc,CAAnB;AAaA,IAAMC,eAAe,GAAG,kCAAxB;AAEA,IAAMC,MAAM,GAAG,mCAAf;;AAEA,SAASC,WAAT,CAAqBC,IAArB,EAA2B;AACzB,MAAMC,OAAO,GAAGD,IAAI,CAACE,KAAL,CAAWJ,MAAX,CAAhB;AACA,SAAOG,OAAO,GAAGA,OAAO,CAACE,GAAR,CAAYC,MAAZ,CAAH,GAAyB,EAAvC;AACD;AAED;;;;;;;;;;;;;AAWA,SAASC,KAAT,CAAeC,IAAf,EAAqB;AACnB,MAAMC,IAAI,GAAG,EAAb;AACA,MAAMC,CAAC,GAAGC,MAAM,CAACH,IAAD,CAAN,CAAaI,IAAb,EAAV,CAFmB;;AAKnB,MAAIF,CAAC,CAAC,CAAD,CAAD,KAAS,GAAT,IAAgBA,CAAC,CAAC,CAAD,CAAD,KAAS,GAA7B,EAAkC;AAChC,WAAOD,IAAP;AACD;;AAEDC,EAAAA,CAAC,CAACG,OAAF,CAAUd,eAAV,EAA2B,UAACe,CAAD,EAAIC,OAAJ,EAAab,IAAb,EAAsB;AAC/C,QAAIc,IAAI,GAAGD,OAAO,CAACE,WAAR,EAAX;AACA,QAAIC,OAAO,GAAGjB,WAAW,CAACC,IAAD,CAAzB;AACA,QAAIiB,UAAU,GAAGJ,OAAjB,CAH+C;;AAK/C,QAAIC,IAAI,KAAK,GAAT,IAAgBE,OAAO,CAACE,MAAR,GAAiB,CAArC,EAAwC;AACtCX,MAAAA,IAAI,CAACY,IAAL,CAAU,CAACF,UAAD,EAAaG,MAAb,CAAoBJ,OAAO,CAACK,MAAR,CAAe,CAAf,EAAkB,CAAlB,CAApB,CAAV;AACAP,MAAAA,IAAI,GAAG,GAAP;AACAG,MAAAA,UAAU,GAAGA,UAAU,KAAK,GAAf,GAAqB,GAArB,GAA2B,GAAxC;AACD,KAT8C;;;AAY/C,QAAID,OAAO,CAACE,MAAR,GAAiBhC,UAAU,CAAC4B,IAAD,CAA/B,EAAuC;AACrC,aAAO,EAAP;AACD;;AAEDP,IAAAA,IAAI,CAACY,IAAL,CAAU,CAACF,UAAD,EAAaG,MAAb,CAAoBJ,OAAO,CAACK,MAAR,CAAe,CAAf,EAAkBnC,UAAU,CAAC4B,IAAD,CAA5B,CAApB,CAAV,EAhB+C;;;;;AAsB/C,WACEE,OAAO,CAACE,MAAR,IAAkBhC,UAAU,CAAC4B,IAAD,CAA5B,IACAE,OAAO,CAACE,MADR,IAEAhC,UAAU,CAAC4B,IAAD,CAHZ,EAIE;AACAP,MAAAA,IAAI,CAACY,IAAL,CAAU,CAACF,UAAD,EAAaG,MAAb,CAAoBJ,OAAO,CAACK,MAAR,CAAe,CAAf,EAAkBnC,UAAU,CAAC4B,IAAD,CAA5B,CAApB,CAAV;AACD;;AAED,WAAO,EAAP;AACD,GA/BD;AAgCA,SAAOP,IAAP;AACD;;AAED,aAAc,GAAGF,KAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3EA;;;;;AAIA,SAASiB,uBAAT,CAAiCC,MAAjC,EAAyC;AACvC,MAAMC,MAAM,GAAGD,MAAM,CAACE,QAAP,CAAgBC,aAAhB,CAA8B,QAA9B,CAAf;AACA,MAAMC,CAAC,GAAGH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAV;AACA,MAAMpB,CAAC,GAAG,IAAIe,MAAM,CAACM,MAAX,CAAkB,WAAlB,CAAV;AACAF,EAAAA,CAAC,CAACG,WAAF,GAAgB,KAAhB;AACAH,EAAAA,CAAC,CAACI,SAAF,GAAc,CAAd;AACAJ,EAAAA,CAAC,CAACK,MAAF,CAASxB,CAAT;AACA,MAAMyB,OAAO,GAAGN,CAAC,CAACO,YAAF,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAAhB;AACA,SAAOD,OAAO,CAAC1B,IAAR,CAAa,CAAb,MAAoB,GAA3B,CARuC;AASxC;;AAED,SAAS4B,WAAT,CAAqBC,KAArB,EAA4BC,KAA5B,EAAmC;AACjC,MAAMC,EAAE,GAAGF,KAAK,CAACG,CAAN,GAAUC,IAAI,CAACC,GAAL,CAASJ,KAAT,CAAV,GAA4BD,KAAK,CAACM,CAAN,GAAUF,IAAI,CAACG,GAAL,CAASN,KAAT,CAAjD;AACA,MAAMO,EAAE,GAAGR,KAAK,CAACM,CAAN,GAAUF,IAAI,CAACC,GAAL,CAASJ,KAAT,CAAV,GAA4BD,KAAK,CAACG,CAAN,GAAUC,IAAI,CAACG,GAAL,CAASN,KAAT,CAAjD;AACAD,EAAAA,KAAK,CAACG,CAAN,GAAUD,EAAV;AACAF,EAAAA,KAAK,CAACM,CAAN,GAAUE,EAAV;AACD;;AAED,SAASC,cAAT,CAAwBT,KAAxB,EAA+BU,EAA/B,EAAmCC,EAAnC,EAAuC;AACrCX,EAAAA,KAAK,CAACG,CAAN,IAAWO,EAAX;AACAV,EAAAA,KAAK,CAACM,CAAN,IAAWK,EAAX;AACD;;AAED,SAASC,UAAT,CAAoBZ,KAApB,EAA2B3C,CAA3B,EAA8B;AAC5B2C,EAAAA,KAAK,CAACG,CAAN,IAAW9C,CAAX;AACA2C,EAAAA,KAAK,CAACM,CAAN,IAAWjD,CAAX;AACD;;AAED,SAASwD,cAAT,CAAwB1B,MAAxB,EAAgC;AAC9B,MAAI,OAAOA,MAAP,KAAkB,WAAlB,IAAiC,CAACA,MAAM,CAAC2B,wBAA7C,EAAuE;AACrE;AACD;;AACD,MAAI3B,MAAM,CAACM,MAAP,IAAiBP,uBAAuB,CAACC,MAAD,CAA5C,EAAsD;AACpD;AACD;;;;;;;;;AAN6B,MAcxBM,MAdwB;AAe5B,oBAAYvB,IAAZ,EAAkB;AAAA;;AAChB,WAAK6C,QAAL,GAAgB,EAAhB;;AACA,UAAI7C,IAAI,IAAIA,IAAI,YAAYuB,MAA5B,EAAoC;AAAA;;AAClC,+BAAKsB,QAAL,EAAchC,IAAd,0CAAsBb,IAAI,CAAC6C,QAA3B;AACD,OAFD,MAEO,IAAI7C,IAAJ,EAAU;AACf,aAAK6C,QAAL,GAAgBC,SAAS,CAAC9C,IAAD,CAAzB;AACD;AACF;;AAtB2B;AAAA;AAAA,8BAwBpBA,IAxBoB,EAwBd;AACZ,YAAIA,IAAI,IAAIA,IAAI,YAAYuB,MAA5B,EAAoC;AAAA;;AAClC,kCAAKsB,QAAL,EAAchC,IAAd,2CAAsBb,IAAI,CAAC6C,QAA3B;AACD;AACF;AA5B2B;AAAA;AAAA,6BA8BrBZ,CA9BqB,EA8BlBG,CA9BkB,EA8Bf;AACX,aAAKS,QAAL,CAAchC,IAAd,CAAmB,CAAC,GAAD,EAAMoB,CAAN,EAASG,CAAT,CAAnB;AACD;AAhC2B;AAAA;AAAA,6BAkCrBH,CAlCqB,EAkClBG,CAlCkB,EAkCf;AACX,aAAKS,QAAL,CAAchC,IAAd,CAAmB,CAAC,GAAD,EAAMoB,CAAN,EAASG,CAAT,CAAnB;AACD;AApC2B;AAAA;AAAA,0BAsCxBH,CAtCwB,EAsCrBG,CAtCqB,EAsClBW,CAtCkB,EAsCfC,KAtCe,EAsCRC,GAtCQ,EAsCHC,GAtCG,EAsCE;AAC5B,aAAKL,QAAL,CAAchC,IAAd,CAAmB,CAAC,IAAD,EAAOoB,CAAP,EAAUG,CAAV,EAAaW,CAAb,EAAgBC,KAAhB,EAAuBC,GAAvB,EAA4B,CAAC,CAACC,GAA9B,CAAnB;AACD;AAxC2B;AAAA;AAAA,4BA0CtBC,EA1CsB,EA0ClBC,EA1CkB,EA0CdC,EA1Cc,EA0CVC,EA1CU,EA0CNP,CA1CM,EA0CH;AACvB,aAAKF,QAAL,CAAchC,IAAd,CAAmB,CAAC,IAAD,EAAOsC,EAAP,EAAWC,EAAX,EAAeC,EAAf,EAAmBC,EAAnB,EAAuBP,CAAvB,CAAnB;AACD;AA5C2B;AAAA;AAAA,8BA8CpBd,CA9CoB,EA8CjBG,CA9CiB,EA8CdmB,EA9Cc,EA8CVC,EA9CU,EA8CNzB,KA9CM,EA8CCiB,KA9CD,EA8CQC,GA9CR,EA8CaC,GA9Cb,EA8CkB;AAC5C,aAAKL,QAAL,CAAchC,IAAd,CAAmB,CAAC,GAAD,EAAMoB,CAAN,EAASG,CAAT,EAAYmB,EAAZ,EAAgBC,EAAhB,EAAoBzB,KAApB,EAA2BiB,KAA3B,EAAkCC,GAAlC,EAAuC,CAAC,CAACC,GAAzC,CAAnB;AACD;AAhD2B;AAAA;AAAA,kCAkDhB;AACV,aAAKL,QAAL,CAAchC,IAAd,CAAmB,CAAC,GAAD,CAAnB;AACD;AApD2B;AAAA;AAAA,oCAsDd4C,IAtDc,EAsDRC,IAtDQ,EAsDFC,IAtDE,EAsDIC,IAtDJ,EAsDU3B,CAtDV,EAsDaG,CAtDb,EAsDgB;AAC1C,aAAKS,QAAL,CAAchC,IAAd,CAAmB,CAAC,GAAD,EAAM4C,IAAN,EAAYC,IAAZ,EAAkBC,IAAlB,EAAwBC,IAAxB,EAA8B3B,CAA9B,EAAiCG,CAAjC,CAAnB;AACD;AAxD2B;AAAA;AAAA,uCA0DXyB,GA1DW,EA0DNC,GA1DM,EA0DD7B,CA1DC,EA0DEG,CA1DF,EA0DK;AAC/B,aAAKS,QAAL,CAAchC,IAAd,CAAmB,CAAC,GAAD,EAAMgD,GAAN,EAAWC,GAAX,EAAgB7B,CAAhB,EAAmBG,CAAnB,CAAnB;AACD;AA5D2B;AAAA;AAAA,2BA8DvBH,CA9DuB,EA8DpBG,CA9DoB,EA8DjB2B,KA9DiB,EA8DVC,MA9DU,EA8DF;AACxB,aAAKnB,QAAL,CAAchC,IAAd,CAAmB,CAAC,GAAD,EAAMoB,CAAN,EAASG,CAAT,EAAY2B,KAAZ,EAAmBC,MAAnB,CAAnB;AACD;AAhE2B;;AAAA;AAAA;;AAmE9B,WAASC,SAAT,CAAmB/C,MAAnB,EAA2B2B,QAA3B,EAAqC;AACnC,QAAIqB,QAAJ;AACA,QAAIC,UAAJ;AACA,QAAIC,YAAJ;AACA,QAAIC,SAAJ;AACA,QAAIC,QAAJ;AACA,QAAIC,QAAJ;AACA,QAAIxC,KAAJ;AACA,QAAIyC,MAAJ;AACA,QAAIC,EAAJ;AACA,QAAIC,EAAJ;AACA,QAAIzC,CAAJ;AACA,QAAIkB,EAAJ;AACA,QAAIf,CAAJ;AACA,QAAIgB,EAAJ;AACA,QAAIL,CAAJ;AACA,QAAIQ,EAAJ;AACA,QAAIC,EAAJ;AACA,QAAImB,CAAJ;AACA,QAAI5F,CAAJ;AACA,QAAI6F,QAAJ;AACA,QAAIC,WAAJ;AACA,QAAIhB,GAAJ;AACA,QAAIC,GAAJ;AACA,QAAIgB,IAAJ;AACA,QAAIC,IAAJ;AACA,QAAI7B,GAAJ;AACA,QAAI8B,UAAU,GAAG;AAAE/C,MAAAA,CAAC,EAAE,CAAL;AAAQG,MAAAA,CAAC,EAAE;AAAX,KAAjB;AACA,QAAM6C,YAAY,GAAG;AAAEhD,MAAAA,CAAC,EAAE,CAAL;AAAQG,MAAAA,CAAC,EAAE;AAAX,KAArB;AAEAlB,IAAAA,MAAM,CAACgE,SAAP;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtC,QAAQ,CAACjC,MAA7B,EAAqC,EAAEuE,CAAvC,EAA0C;AACxC,UAAMhG,CAAC,GAAG0D,QAAQ,CAACsC,CAAD,CAAlB;AACAP,MAAAA,QAAQ,GAAGzF,CAAC,CAAC,CAAD,CAAZ,CAFwC;;AAKxC,UACEyF,QAAQ,KAAK,GAAb,IACAA,QAAQ,KAAK,GADb,IAEAA,QAAQ,KAAK,GAFb,IAGAA,QAAQ,KAAK,GAJf,EAKE;AACAf,QAAAA,GAAG,GAAG,IAAN;AACAC,QAAAA,GAAG,GAAG,IAAN;AACD;;AAED,UACEc,QAAQ,KAAK,GAAb,IACAA,QAAQ,KAAK,GADb,IAEAA,QAAQ,KAAK,GAFb,IAGAA,QAAQ,KAAK,GAJf,EAKE;AACAE,QAAAA,IAAI,GAAG,IAAP;AACAC,QAAAA,IAAI,GAAG,IAAP;AACD;;AAED,cAAQH,QAAR;AACE,aAAK,GAAL;AACA,aAAK,GAAL;AACE,cAAIA,QAAQ,KAAK,GAAjB,EAAsB;AACpB3C,YAAAA,CAAC,IAAI9C,CAAC,CAAC,CAAD,CAAN;AACAiD,YAAAA,CAAC,IAAIjD,CAAC,CAAC,CAAD,CAAN;AACD,WAHD,MAGO;AACL8C,YAAAA,CAAC,GAAG9C,CAAC,CAAC,CAAD,CAAL;AACAiD,YAAAA,CAAC,GAAGjD,CAAC,CAAC,CAAD,CAAL;AACD;;AAED,cAAIyF,QAAQ,KAAK,GAAb,IAAoB,CAACI,UAAzB,EAAqC;AACnCA,YAAAA,UAAU,GAAG;AAAE/C,cAAAA,CAAC,EAADA,CAAF;AAAKG,cAAAA,CAAC,EAADA;AAAL,aAAb;AACD;;AAEDlB,UAAAA,MAAM,CAACkE,MAAP,CAAcnD,CAAd,EAAiBG,CAAjB;AACA;;AACF,aAAK,GAAL;AACEH,UAAAA,CAAC,IAAI9C,CAAC,CAAC,CAAD,CAAN;AACAiD,UAAAA,CAAC,IAAIjD,CAAC,CAAC,CAAD,CAAN;AACA+B,UAAAA,MAAM,CAACmE,MAAP,CAAcpD,CAAd,EAAiBG,CAAjB;AACA;;AACF,aAAK,GAAL;AACEH,UAAAA,CAAC,GAAG9C,CAAC,CAAC,CAAD,CAAL;AACAiD,UAAAA,CAAC,GAAGjD,CAAC,CAAC,CAAD,CAAL;AACA+B,UAAAA,MAAM,CAACmE,MAAP,CAAcpD,CAAd,EAAiBG,CAAjB;AACA;;AACF,aAAK,GAAL;AACEH,UAAAA,CAAC,GAAG9C,CAAC,CAAC,CAAD,CAAL;AACA+B,UAAAA,MAAM,CAACmE,MAAP,CAAcpD,CAAd,EAAiBG,CAAjB;AACA;;AACF,aAAK,GAAL;AACEH,UAAAA,CAAC,IAAI9C,CAAC,CAAC,CAAD,CAAN;AACA+B,UAAAA,MAAM,CAACmE,MAAP,CAAcpD,CAAd,EAAiBG,CAAjB;AACA;;AACF,aAAK,GAAL;AACEA,UAAAA,CAAC,GAAGjD,CAAC,CAAC,CAAD,CAAL;AACA+B,UAAAA,MAAM,CAACmE,MAAP,CAAcpD,CAAd,EAAiBG,CAAjB;AACA;;AACF,aAAK,GAAL;AACEA,UAAAA,CAAC,IAAIjD,CAAC,CAAC,CAAD,CAAN;AACA+B,UAAAA,MAAM,CAACmE,MAAP,CAAcpD,CAAd,EAAiBG,CAAjB;AACA;;AACF,aAAK,GAAL;AACA,aAAK,GAAL;AACE,cAAIwC,QAAQ,KAAK,GAAjB,EAAsB;AACpB3C,YAAAA,CAAC,IAAI9C,CAAC,CAAC,CAAD,CAAN;AACAiD,YAAAA,CAAC,IAAIjD,CAAC,CAAC,CAAD,CAAN;AACD,WAHD,MAGO;AACL8C,YAAAA,CAAC,GAAG9C,CAAC,CAAC,CAAD,CAAL;AACAiD,YAAAA,CAAC,GAAGjD,CAAC,CAAC,CAAD,CAAL;AACD;;AAEDoE,UAAAA,EAAE,GAAGpE,CAAC,CAAC,CAAD,CAAN,CATF;;AAUEqE,UAAAA,EAAE,GAAGrE,CAAC,CAAC,CAAD,CAAN,CAVF;;AAWE4C,UAAAA,KAAK,GAAI5C,CAAC,CAAC,CAAD,CAAD,GAAO+C,IAAI,CAACoD,EAAb,GAAmB,GAA3B;AACAlB,UAAAA,YAAY,GAAG,CAAC,CAACjF,CAAC,CAAC,CAAD,CAAlB;AACAkF,UAAAA,SAAS,GAAG,CAAC,CAAClF,CAAC,CAAC,CAAD,CAAf;AACAmF,UAAAA,QAAQ,GAAG;AAAErC,YAAAA,CAAC,EAADA,CAAF;AAAKG,YAAAA,CAAC,EAADA;AAAL,WAAX,CAdF;;AAkBEmC,UAAAA,QAAQ,GAAG;AACTtC,YAAAA,CAAC,EAAE,CAACgD,YAAY,CAAChD,CAAb,GAAiBqC,QAAQ,CAACrC,CAA3B,IAAgC,CAD1B;AAETG,YAAAA,CAAC,EAAE,CAAC6C,YAAY,CAAC7C,CAAb,GAAiBkC,QAAQ,CAAClC,CAA3B,IAAgC;AAF1B,WAAX;AAIAP,UAAAA,WAAW,CAAC0C,QAAD,EAAW,CAACxC,KAAZ,CAAX,CAtBF;;AAyBEyC,UAAAA,MAAM,GACHD,QAAQ,CAACtC,CAAT,GAAasC,QAAQ,CAACtC,CAAvB,IAA6BsB,EAAE,GAAGA,EAAlC,IACCgB,QAAQ,CAACnC,CAAT,GAAamC,QAAQ,CAACnC,CAAvB,IAA6BoB,EAAE,GAAGA,EAAlC,CAFF;;AAGA,cAAIgB,MAAM,GAAG,CAAb,EAAgB;AACdA,YAAAA,MAAM,GAAGtC,IAAI,CAACqD,IAAL,CAAUf,MAAV,CAAT;AACAjB,YAAAA,EAAE,IAAIiB,MAAN;AACAhB,YAAAA,EAAE,IAAIgB,MAAN;AACD;;AAEDK,UAAAA,WAAW,GAAG;AACZ5C,YAAAA,CAAC,EAAGsB,EAAE,GAAGgB,QAAQ,CAACnC,CAAf,GAAoBoB,EADX;AAEZpB,YAAAA,CAAC,EAAE,EAAEoB,EAAE,GAAGe,QAAQ,CAACtC,CAAhB,IAAqBsB;AAFZ,WAAd;AAIAkB,UAAAA,EAAE,GAAGlB,EAAE,GAAGA,EAAL,GAAUC,EAAV,GAAeA,EAApB;AACAkB,UAAAA,EAAE,GACAnB,EAAE,GAAGA,EAAL,GAAUgB,QAAQ,CAACnC,CAAnB,GAAuBmC,QAAQ,CAACnC,CAAhC,GACAoB,EAAE,GAAGA,EAAL,GAAUe,QAAQ,CAACtC,CAAnB,GAAuBsC,QAAQ,CAACtC,CAFlC;;AAGA,cAAIoC,SAAS,KAAKD,YAAlB,EAAgC;AAC9B1B,YAAAA,UAAU,CAACmC,WAAD,EAAc3C,IAAI,CAACqD,IAAL,CAAU,CAACd,EAAE,GAAGC,EAAN,IAAYA,EAAtB,KAA6B,CAA3C,CAAV;AACD,WAFD,MAEO;AACLhC,YAAAA,UAAU,CAACmC,WAAD,EAAc,CAAC3C,IAAI,CAACqD,IAAL,CAAU,CAACd,EAAE,GAAGC,EAAN,IAAYA,EAAtB,CAAD,IAA8B,CAA5C,CAAV;AACD;;AAEDP,UAAAA,UAAU,GAAGjC,IAAI,CAACsD,KAAL,CACX,CAACjB,QAAQ,CAACnC,CAAT,GAAayC,WAAW,CAACzC,CAA1B,IAA+BoB,EADpB,EAEX,CAACe,QAAQ,CAACtC,CAAT,GAAa4C,WAAW,CAAC5C,CAA1B,IAA+BsB,EAFpB,CAAb;AAIAW,UAAAA,QAAQ,GAAGhC,IAAI,CAACsD,KAAL,CACT,EAAEjB,QAAQ,CAACnC,CAAT,GAAayC,WAAW,CAACzC,CAA3B,IAAgCoB,EADvB,EAET,EAAEe,QAAQ,CAACtC,CAAT,GAAa4C,WAAW,CAAC5C,CAA3B,IAAgCsB,EAFvB,CAAX;AAKA1B,UAAAA,WAAW,CAACgD,WAAD,EAAc9C,KAAd,CAAX;AACAQ,UAAAA,cAAc,CACZsC,WADY,EAEZ,CAACP,QAAQ,CAACrC,CAAT,GAAagD,YAAY,CAAChD,CAA3B,IAAgC,CAFpB,EAGZ,CAACqC,QAAQ,CAAClC,CAAT,GAAa6C,YAAY,CAAC7C,CAA3B,IAAgC,CAHpB,CAAd;AAMAlB,UAAAA,MAAM,CAACuE,IAAP;AACAvE,UAAAA,MAAM,CAACwE,SAAP,CAAiBb,WAAW,CAAC5C,CAA7B,EAAgC4C,WAAW,CAACzC,CAA5C;AACAlB,UAAAA,MAAM,CAACyE,MAAP,CAAc5D,KAAd;AACAb,UAAAA,MAAM,CAAC0E,KAAP,CAAarC,EAAb,EAAiBC,EAAjB;AACAtC,UAAAA,MAAM,CAAC2E,GAAP,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,EAAoB1B,UAApB,EAAgCD,QAAhC,EAA0C,CAACG,SAA3C;AACAnD,UAAAA,MAAM,CAAC4E,OAAP;AACA;;AACF,aAAK,GAAL;AACEjC,UAAAA,GAAG,GAAG1E,CAAC,CAAC,CAAD,CAAP,CADF;;AAEE2E,UAAAA,GAAG,GAAG3E,CAAC,CAAC,CAAD,CAAP;AACA8C,UAAAA,CAAC,GAAG9C,CAAC,CAAC,CAAD,CAAL;AACAiD,UAAAA,CAAC,GAAGjD,CAAC,CAAC,CAAD,CAAL;AACA+B,UAAAA,MAAM,CAAC6E,aAAP,CAAqB5G,CAAC,CAAC,CAAD,CAAtB,EAA2BA,CAAC,CAAC,CAAD,CAA5B,EAAiC0E,GAAjC,EAAsCC,GAAtC,EAA2C7B,CAA3C,EAA8CG,CAA9C;AACA;;AACF,aAAK,GAAL;AACElB,UAAAA,MAAM,CAAC6E,aAAP,CACE5G,CAAC,CAAC,CAAD,CAAD,GAAO8C,CADT,EAEE9C,CAAC,CAAC,CAAD,CAAD,GAAOiD,CAFT,EAGEjD,CAAC,CAAC,CAAD,CAAD,GAAO8C,CAHT,EAIE9C,CAAC,CAAC,CAAD,CAAD,GAAOiD,CAJT,EAKEjD,CAAC,CAAC,CAAD,CAAD,GAAO8C,CALT,EAME9C,CAAC,CAAC,CAAD,CAAD,GAAOiD,CANT;AAQAyB,UAAAA,GAAG,GAAG1E,CAAC,CAAC,CAAD,CAAD,GAAO8C,CAAb,CATF;;AAUE6B,UAAAA,GAAG,GAAG3E,CAAC,CAAC,CAAD,CAAD,GAAOiD,CAAb;AACAH,UAAAA,CAAC,IAAI9C,CAAC,CAAC,CAAD,CAAN;AACAiD,UAAAA,CAAC,IAAIjD,CAAC,CAAC,CAAD,CAAN;AACA;;AACF,aAAK,GAAL;AACE,cAAI0E,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,IAA5B,EAAkC;AAChCA,YAAAA,GAAG,GAAG5B,CAAN;AACA6B,YAAAA,GAAG,GAAG1B,CAAN;AACD;;AAEDlB,UAAAA,MAAM,CAAC6E,aAAP,CACE,IAAI9D,CAAJ,GAAQ4B,GADV,EAEE,IAAIzB,CAAJ,GAAQ0B,GAFV,EAGE3E,CAAC,CAAC,CAAD,CAHH,EAIEA,CAAC,CAAC,CAAD,CAJH,EAKEA,CAAC,CAAC,CAAD,CALH,EAMEA,CAAC,CAAC,CAAD,CANH;AAQA0E,UAAAA,GAAG,GAAG1E,CAAC,CAAC,CAAD,CAAP,CAdF;;AAeE2E,UAAAA,GAAG,GAAG3E,CAAC,CAAC,CAAD,CAAP;AACA8C,UAAAA,CAAC,GAAG9C,CAAC,CAAC,CAAD,CAAL;AACAiD,UAAAA,CAAC,GAAGjD,CAAC,CAAC,CAAD,CAAL;AACA;;AACF,aAAK,GAAL;AACE,cAAI0E,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,IAA5B,EAAkC;AAChCA,YAAAA,GAAG,GAAG5B,CAAN;AACA6B,YAAAA,GAAG,GAAG1B,CAAN;AACD;;AAEDlB,UAAAA,MAAM,CAAC6E,aAAP,CACE,IAAI9D,CAAJ,GAAQ4B,GADV,EAEE,IAAIzB,CAAJ,GAAQ0B,GAFV,EAGE3E,CAAC,CAAC,CAAD,CAAD,GAAO8C,CAHT,EAIE9C,CAAC,CAAC,CAAD,CAAD,GAAOiD,CAJT,EAKEjD,CAAC,CAAC,CAAD,CAAD,GAAO8C,CALT,EAME9C,CAAC,CAAC,CAAD,CAAD,GAAOiD,CANT;AAQAyB,UAAAA,GAAG,GAAG1E,CAAC,CAAC,CAAD,CAAD,GAAO8C,CAAb,CAdF;;AAeE6B,UAAAA,GAAG,GAAG3E,CAAC,CAAC,CAAD,CAAD,GAAOiD,CAAb;AACAH,UAAAA,CAAC,IAAI9C,CAAC,CAAC,CAAD,CAAN;AACAiD,UAAAA,CAAC,IAAIjD,CAAC,CAAC,CAAD,CAAN;AACA;;AACF,aAAK,GAAL;AACE2F,UAAAA,IAAI,GAAG3F,CAAC,CAAC,CAAD,CAAR,CADF;;AAEE4F,UAAAA,IAAI,GAAG5F,CAAC,CAAC,CAAD,CAAR;AACA8C,UAAAA,CAAC,GAAG9C,CAAC,CAAC,CAAD,CAAL;AACAiD,UAAAA,CAAC,GAAGjD,CAAC,CAAC,CAAD,CAAL;AACA+B,UAAAA,MAAM,CAAC8E,gBAAP,CAAwBlB,IAAxB,EAA8BC,IAA9B,EAAoC9C,CAApC,EAAuCG,CAAvC;AACA;;AACF,aAAK,GAAL;AACE0C,UAAAA,IAAI,GAAG3F,CAAC,CAAC,CAAD,CAAD,GAAO8C,CAAd,CADF;;AAEE8C,UAAAA,IAAI,GAAG5F,CAAC,CAAC,CAAD,CAAD,GAAOiD,CAAd;AACAH,UAAAA,CAAC,IAAI9C,CAAC,CAAC,CAAD,CAAN;AACAiD,UAAAA,CAAC,IAAIjD,CAAC,CAAC,CAAD,CAAN;AACA+B,UAAAA,MAAM,CAAC8E,gBAAP,CAAwBlB,IAAxB,EAA8BC,IAA9B,EAAoC9C,CAApC,EAAuCG,CAAvC;AACA;;AACF,aAAK,GAAL;AACE,cAAI0C,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,IAA9B,EAAoC;AAClCA,YAAAA,IAAI,GAAG7C,CAAP;AACA8C,YAAAA,IAAI,GAAG3C,CAAP;AACD;;AACD0C,UAAAA,IAAI,GAAG,IAAI7C,CAAJ,GAAQ6C,IAAf,CALF;;AAMEC,UAAAA,IAAI,GAAG,IAAI3C,CAAJ,GAAQ2C,IAAf;AACA9C,UAAAA,CAAC,GAAG9C,CAAC,CAAC,CAAD,CAAL;AACAiD,UAAAA,CAAC,GAAGjD,CAAC,CAAC,CAAD,CAAL;AACA+B,UAAAA,MAAM,CAAC8E,gBAAP,CAAwBlB,IAAxB,EAA8BC,IAA9B,EAAoC9C,CAApC,EAAuCG,CAAvC;AACA;;AACF,aAAK,GAAL;AACE,cAAI0C,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,IAA9B,EAAoC;AAClCA,YAAAA,IAAI,GAAG7C,CAAP;AACA8C,YAAAA,IAAI,GAAG3C,CAAP;AACD;;AACD0C,UAAAA,IAAI,GAAG,IAAI7C,CAAJ,GAAQ6C,IAAf,CALF;;AAMEC,UAAAA,IAAI,GAAG,IAAI3C,CAAJ,GAAQ2C,IAAf;AACA9C,UAAAA,CAAC,IAAI9C,CAAC,CAAC,CAAD,CAAN;AACAiD,UAAAA,CAAC,IAAIjD,CAAC,CAAC,CAAD,CAAN;AACA+B,UAAAA,MAAM,CAAC8E,gBAAP,CAAwBlB,IAAxB,EAA8BC,IAA9B,EAAoC9C,CAApC,EAAuCG,CAAvC;AACA;;AACF,aAAK,GAAL;AACA,aAAK,GAAL;AACEH,UAAAA,CAAC,GAAG+C,UAAU,CAAC/C,CAAf;AACAG,UAAAA,CAAC,GAAG4C,UAAU,CAAC5C,CAAf;AACA4C,UAAAA,UAAU,GAAGiB,SAAb;AACA/E,UAAAA,MAAM,CAACgF,SAAP;AACA;;AACF,aAAK,IAAL;;AACEjE,UAAAA,CAAC,GAAG9C,CAAC,CAAC,CAAD,CAAL;AACAiD,UAAAA,CAAC,GAAGjD,CAAC,CAAC,CAAD,CAAL;AACA4D,UAAAA,CAAC,GAAG5D,CAAC,CAAC,CAAD,CAAL;AACAgF,UAAAA,UAAU,GAAGhF,CAAC,CAAC,CAAD,CAAd;AACA+E,UAAAA,QAAQ,GAAG/E,CAAC,CAAC,CAAD,CAAZ;AACA+D,UAAAA,GAAG,GAAG/D,CAAC,CAAC,CAAD,CAAP;AACA+B,UAAAA,MAAM,CAAC2E,GAAP,CAAW5D,CAAX,EAAcG,CAAd,EAAiBW,CAAjB,EAAoBoB,UAApB,EAAgCD,QAAhC,EAA0ChB,GAA1C;AACA;;AACF,aAAK,IAAL;;AACEC,UAAAA,EAAE,GAAGhE,CAAC,CAAC,CAAD,CAAN;AACAiE,UAAAA,EAAE,GAAGjE,CAAC,CAAC,CAAD,CAAN;AACA8C,UAAAA,CAAC,GAAG9C,CAAC,CAAC,CAAD,CAAL;AACAiD,UAAAA,CAAC,GAAGjD,CAAC,CAAC,CAAD,CAAL;AACA4D,UAAAA,CAAC,GAAG5D,CAAC,CAAC,CAAD,CAAL;AACA+B,UAAAA,MAAM,CAACiF,KAAP,CAAahD,EAAb,EAAiBC,EAAjB,EAAqBnB,CAArB,EAAwBG,CAAxB,EAA2BW,CAA3B;AACA;;AACF,aAAK,GAAL;;AACEd,UAAAA,CAAC,GAAG9C,CAAC,CAAC,CAAD,CAAL;AACAiD,UAAAA,CAAC,GAAGjD,CAAC,CAAC,CAAD,CAAL;AACAoE,UAAAA,EAAE,GAAGpE,CAAC,CAAC,CAAD,CAAN;AACAqE,UAAAA,EAAE,GAAGrE,CAAC,CAAC,CAAD,CAAN;AACA4C,UAAAA,KAAK,GAAG5C,CAAC,CAAC,CAAD,CAAT;AACAgF,UAAAA,UAAU,GAAGhF,CAAC,CAAC,CAAD,CAAd;AACA+E,UAAAA,QAAQ,GAAG/E,CAAC,CAAC,CAAD,CAAZ;AACA+D,UAAAA,GAAG,GAAG/D,CAAC,CAAC,CAAD,CAAP;AACA+B,UAAAA,MAAM,CAACuE,IAAP;AACAvE,UAAAA,MAAM,CAACwE,SAAP,CAAiBzD,CAAjB,EAAoBG,CAApB;AACAlB,UAAAA,MAAM,CAACyE,MAAP,CAAc5D,KAAd;AACAb,UAAAA,MAAM,CAAC0E,KAAP,CAAarC,EAAb,EAAiBC,EAAjB;AACAtC,UAAAA,MAAM,CAAC2E,GAAP,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,EAAoB1B,UAApB,EAAgCD,QAAhC,EAA0ChB,GAA1C;AACAhC,UAAAA,MAAM,CAAC4E,OAAP;AACA;;AACF,aAAK,GAAL;;AACE7D,UAAAA,CAAC,GAAG9C,CAAC,CAAC,CAAD,CAAL;AACAiD,UAAAA,CAAC,GAAGjD,CAAC,CAAC,CAAD,CAAL;AACAwF,UAAAA,CAAC,GAAGxF,CAAC,CAAC,CAAD,CAAL;AACAJ,UAAAA,CAAC,GAAGI,CAAC,CAAC,CAAD,CAAL;AACA6F,UAAAA,UAAU,GAAG;AAAE/C,YAAAA,CAAC,EAADA,CAAF;AAAKG,YAAAA,CAAC,EAADA;AAAL,WAAb;AACAlB,UAAAA,MAAM,CAACkF,IAAP,CAAYnE,CAAZ,EAAeG,CAAf,EAAkBuC,CAAlB,EAAqB5F,CAArB;AACA;;AAjQJ;;AAsQAkG,MAAAA,YAAY,CAAChD,CAAb,GAAiBA,CAAjB;AACAgD,MAAAA,YAAY,CAAC7C,CAAb,GAAiBA,CAAjB;AACD;AACF;;AAED,MAAMiE,KAAK,GAAGpF,MAAM,CAAC2B,wBAAP,CAAgC0D,SAAhC,CAA0CC,IAAxD;AACA,MAAMC,OAAO,GAAGvF,MAAM,CAAC2B,wBAAP,CAAgC0D,SAAhC,CAA0C5E,MAA1D;;AAEAT,EAAAA,MAAM,CAAC2B,wBAAP,CAAgC0D,SAAhC,CAA0CC,IAA1C,GAAiD,SAASA,IAAT,GAAuB;AAAA,sCAAN7G,IAAM;AAANA,MAAAA,IAAM;AAAA;;AACtE,QAAI+G,QAAQ,GAAG,SAAf;;AACA,QACE/G,IAAI,CAACkB,MAAL,KAAgB,CAAhB,IACClB,IAAI,CAACkB,MAAL,KAAgB,CAAhB,IAAqB,OAAOlB,IAAI,CAAC,CAAD,CAAX,KAAmB,QAF3C,EAGE;AACA2G,MAAAA,KAAK,CAACK,KAAN,CAAY,IAAZ,EAAkBhH,IAAlB;AACA;AACD;;AACD,QAAIiH,SAAS,CAAC/F,MAAV,KAAqB,CAAzB,EAA4B;AAC1B6F,MAAAA,QAAQ,GAAG/G,IAAI,CAAC,CAAD,CAAf;AACD;;AACD,QAAMM,IAAI,GAAGN,IAAI,CAAC,CAAD,CAAjB;AACAuE,IAAAA,SAAS,CAAC,IAAD,EAAOjE,IAAI,CAAC6C,QAAZ,CAAT;AACAwD,IAAAA,KAAK,CAACO,IAAN,CAAW,IAAX,EAAiBH,QAAjB;AACD,GAfD;;AAiBAxF,EAAAA,MAAM,CAAC2B,wBAAP,CAAgC0D,SAAhC,CAA0C5E,MAA1C,GAAmD,SAASA,MAAT,CAAgB1B,IAAhB,EAAsB;AACvE,QAAI,CAACA,IAAL,EAAW;AACTwG,MAAAA,OAAO,CAACI,IAAR,CAAa,IAAb;AACA;AACD;;AACD3C,IAAAA,SAAS,CAAC,IAAD,EAAOjE,IAAI,CAAC6C,QAAZ,CAAT;AACA2D,IAAAA,OAAO,CAACI,IAAR,CAAa,IAAb;AACD,GAPD;;AASA,MAAMC,cAAc,GAClB5F,MAAM,CAAC2B,wBAAP,CAAgC0D,SAAhC,CAA0CQ,aAD5C;;AAGA7F,EAAAA,MAAM,CAAC2B,wBAAP,CAAgC0D,SAAhC,CAA0CQ,aAA1C,GAA0D,SAASA,aAAT,GAExD;AAAA,uCADGpH,IACH;AADGA,MAAAA,IACH;AAAA;;;AAEA,QAAIA,IAAI,CAAC,CAAD,CAAJ,CAAQqH,WAAR,CAAoBC,IAApB,KAA6B,QAAjC,EAA2C;;AAEzC,UAAM/E,CAAC,GAAGvC,IAAI,CAAC,CAAD,CAAd;AACA,UAAM0C,CAAC,GAAG1C,IAAI,CAAC,CAAD,CAAd;AACA,UAAM+G,QAAQ,GAAG/G,IAAI,CAAC,CAAD,CAAJ,IAAW,SAA5B;AACA,UAAMM,IAAI,GAAGN,IAAI,CAAC,CAAD,CAAjB;AACAuE,MAAAA,SAAS,CAAC,IAAD,EAAOjE,IAAI,CAAC6C,QAAZ,CAAT;AACA,aAAOgE,cAAc,CAACH,KAAf,CAAqB,IAArB,EAA2B,CAACzE,CAAD,EAAIG,CAAJ,EAAOqE,QAAP,CAA3B,CAAP;AACD,KARD,MAQO;AACL,aAAOI,cAAc,CAACH,KAAf,CAAqB,IAArB,EAA2BhH,IAA3B,CAAP;AACD;AACF,GAfD;;AAiBAuB,EAAAA,MAAM,CAACM,MAAP,GAAgBA,MAAhB;AACD;;AAED,kBAAc,GAAGoB,cAAjB;;ACzdA,IAAI,OAAO1B,MAAP,KAAkB,WAAtB,EAAmC;AACjCgG,EAAAA,cAAc,CAAChG,MAAD,CAAd;AACD;;OAEa,GAAG;AACfgG,EAAAA,cAAc,EAAdA,cADe;AAEfnE,EAAAA,SAAS,EAATA;AAFe;;;;"}